<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Preview</title>

    <meta property="og:title" content="" id="og-title">
    <meta property="og:description" content="Read this amazing book!" id="og-desc">
    <meta property="og:image" content="" id="og-image">
    <meta property="og:url" content="" id="og-url">
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="" id="twitter-title">
    <meta name="twitter:description" content="Read this amazing book!" id="twitter-desc">
    <meta name="twitter:image" content="" id="twitter-image">

    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            // Get book ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const bookId = urlParams.get("id"); // Assuming URL is like preview.html?id=1
    
            // Fetch books.json
            try {
                const response = await fetch("books.json"); // Make sure this file is accessible
                const books = await response.json();
    
                // Find the book with matching ID
                const book = books.find(b => b.id == bookId);
    
                // If book exists, update meta tags
                if (book) {
                    document.querySelector("meta[property='og:title']").setAttribute("content", book.title);
                    document.querySelector("meta[property='og:image']").setAttribute("content", book.cover);
                    document.querySelector("meta[property='og:url']").setAttribute("content", window.location.href);
                    document.querySelector("meta[name='twitter:title']").setAttribute("content", book.title);
                    document.querySelector("meta[name='twitter:image']").setAttribute("content", book.cover);
                }
            } catch (error) {
                console.error("Error loading books.json:", error);
            }
        });
    </script>
    
</head>
<body>
    <h1>Loading Book Preview...</h1>
</body>
</html>
